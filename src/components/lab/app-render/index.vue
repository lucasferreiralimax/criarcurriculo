<template lang="pug">
section.render(:class="{ 'viewfixed' : viewfixed, 'no-icon' : !icon_render }")
  .view
    .content(:class="layout_render")
      label.figure(for="GET-photo" v-if="user.photo" :style="(user.name || user.maritalstatus) ? 'position: absolute;' : 'position: relative;'")
        figure
          img#photo(:src="user.photo" :alt="user.name" width="auto")
        button.btn.delete.small.photo(type="button" @click="removeImage($event)" v-if="user.photo" :aria-label="$t('aria-label.photo_remove')")
          svg(viewBox="0 0 329.269 329" xmlns="http://www.w3.org/2000/svg")
            path(d="M194.8 164.77L323.013 36.555c8.343-8.34 8.343-21.825 0-30.164-8.34-8.34-21.825-8.34-30.164 0L164.633 134.605 36.422 6.391c-8.344-8.34-21.824-8.34-30.164 0-8.344 8.34-8.344 21.824 0 30.164l128.21 128.215L6.259 292.984c-8.344 8.34-8.344 21.825 0 30.164a21.266 21.266 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25l128.21-128.214 128.216 128.214a21.273 21.273 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25 8.343-8.34 8.343-21.824 0-30.164zm0 0")
        button.btn.small(type="button" @click="rotateFigure" :aria-label="$t('aria-label.photo_rotate')")
          svg(xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 481.95 481.95")
            path(d="M331.5 114.75L216.75 0v79.05C117.3 91.8 38.25 175.95 38.25 280.5s79.05 188.7 178.5 201.45v-51C145.35 418.2 89.25 357 89.25 280.5s56.1-137.7 127.5-150.45v99.45L331.5 114.75zM443.7 255c-5.101-35.7-17.851-68.85-40.8-99.45l-35.7 35.7c12.75 20.4 22.95 40.8 25.5 63.75h51zM267.75 430.95v51c35.7-5.101 68.85-17.851 99.45-40.8l-35.7-35.7c-20.4 12.75-40.8 22.95-63.75 25.5zm99.45-61.2l35.7 35.7c22.949-30.601 38.25-63.75 40.8-99.45h-51c-2.55 22.95-12.75 43.35-25.5 63.75z")
      .info(:class="{ 'photo': user.photo }" v-if="user.name || user.maritalstatus")
        label(for="GET-name")
          h1 {{ user.name }}
        p.contact-personal(v-if="user.maritalstatus")
          svg.icon-user(v-if="user.genero == '' || user.genero == 'u'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 350 350" width="16")
            path(d="M175 171.173c38.914 0 70.463-38.318 70.463-85.586C245.463 38.318 235.105 0 175 0s-70.465 38.318-70.465 85.587c0 47.268 31.549 85.586 70.465 85.586zM41.909 301.853c-.012-2.882-.024-.812 0 0zM308.085 304.104c.038-.789.013-5.474 0 0z")
            path(d="M307.935 298.397c-1.305-82.342-12.059-105.805-94.352-120.657 0 0-11.584 14.761-38.584 14.761s-38.586-14.761-38.586-14.761C55.018 192.43 43.61 215.545 42.11 295.722c-.123 6.547-.18 6.891-.202 6.131.005 1.424.011 4.058.011 8.651 0 0 19.592 39.496 133.08 39.496 113.486 0 133.08-39.496 133.08-39.496 0-2.951.002-5.003.005-6.399-.022.47-.066-.441-.149-5.708z")
          svg.icon-user(v-if="user.genero == 'h'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16")
            path(d="M421.184 384.96l-81.728-20.437-6.955-27.819c21.867-21.653 36.843-51.392 41.28-81.899 12.117-3.413 21.504-13.803 23.125-26.837l5.333-42.667c1.131-9.003-1.643-18.112-7.616-24.939a32.11 32.11 0 0 0-12.8-8.896l1.963-40.171 7.979-8c12.011-12.779 21.973-34.688 1.152-66.475-16-24.425-43.178-36.82-80.81-36.82-14.848 0-49.024 0-80.853 21.376C140.373 23.275 128 65.493 128 106.667c0 9.579 2.325 31.147 3.861 44.16a31.815 31.815 0 0 0-14.336 9.344 32.03 32.03 0 0 0-7.765 25.152l5.333 42.667c1.749 13.909 12.309 24.853 25.664 27.456 4.416 29.333 18.624 58.112 39.232 79.403l-7.424 29.717-81.728 20.437C37.333 398.336 0 446.165 0 501.333 0 507.221 4.779 512 10.667 512h490.667c5.888 0 10.667-4.821 10.667-10.709a119.728 119.728 0 0 0-90.817-116.331z")
          svg.icon-user(v-if="user.genero == 'm'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16")
            path(d="M421.184 384.96l-81.728-20.437-4.715-18.88c56.384-9.493 85.397-26.389 86.677-27.136 3.029-1.771 4.907-4.992 5.163-8.491.235-3.499-1.323-6.933-4.075-9.131C422.123 300.587 384 269.099 384 160c0-92.011-21.525-138.667-64-138.667h-6.293C298.389 6.528 286.891 0 256 0c-40.085 0-128 40.299-128 160 0 109.099-38.123 140.587-38.4 140.8a10.703 10.703 0 0 0-4.267 9.067 10.66 10.66 0 0 0 5.163 8.597c1.28.768 30.016 17.749 86.741 27.221l-4.715 18.837-81.727 20.438C37.333 398.336 0 446.165 0 501.333 0 507.221 4.779 512 10.667 512h490.667c5.888 0 10.667-4.821 10.667-10.709a119.728 119.728 0 0 0-90.817-116.331z")
          | {{ user.maritalstatus }}
          span(v-if="user.age") , {{ user.age }} {{ user.age ? $t('calendar.years') : '' }}&nbsp;
            span(v-if="user.travel" @click="labelFor('GET-travel-yes')")
              svg.icon-travel(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612.002 612.002" width="13")
                path(d="M571.771 123.555c25.121-33.626 40.157-68.538 40.23-93.48-.031-8.077-1.651-14.389-4.733-19.091a15.254 15.254 0 0 0-2.779-3.563c-1.558-1.546-2.958-2.372-3.261-2.539-4.932-3.292-11.274-4.88-19.353-4.88-24.88.042-59.802 15.068-93.438 40.23-27.188 20.345-54.378 48.997-92.017 88.673a6179.276 6179.276 0 0 1-20.21 21.223l-72.905-21.85.219-.209c3.03-3.062 4.755-7.273 4.713-11.411a16.252 16.252 0 0 0-4.765-11.609l-13.166-13.187a16.396 16.396 0 0 0-11.588-4.817c-4.389 0-8.485 1.693-11.547 4.786l-19.697 19.708-10.429-3.114c2.247-2.853 3.49-6.416 3.448-9.927.042-4.431-1.672-8.558-4.754-11.62L222.51 73.649c-3.02-3.03-7.2-4.765-11.588-4.765-4.368 0-8.454 1.704-11.484 4.786l-18.077 18.067-74.128-22.205a18.55 18.55 0 0 0-5.298-.752c-5.266.063-10.146 2.017-13.709 5.549L62.165 100.4c-2.958 2.957-4.619 6.959-4.587 10.752-.094 5.59 2.999 10.752 7.952 13.406l155.884 87.085c.763.428 2.968 2.059 3.783 2.874l44.441 44.431c-41.568 43.793-78.601 86.208-107.461 123.104a683.234 683.234 0 0 0-7.754 10.084L33.827 381.185a16.328 16.328 0 0 0-2.08-.126c-5.528.115-10.93 2.3-14.942 6.176L4.652 399.377c-2.999 2.937-4.692 6.907-4.65 10.742-.094 5.852 3.448 11.264 8.767 13.636l84.838 40.293c.731.366 2.633 1.714 3.25 2.33l7.043 6.991c-2.205 6.207-3.323 11.588-3.386 16.312-.021 6.321 2.017 11.734 5.915 15.632l.303.262.083.062c4.002 3.877 9.185 5.852 15.601 5.852 4.619-.073 9.948-1.17 16.176-3.364l7.147 7.137c.554.585 1.881 2.445 2.226 3.187l40.209 84.651c2.456 5.402 7.753 8.902 13.521 8.902h.083c3.992 0 7.806-1.599 10.721-4.524l12.445-12.487c3.688-3.887 5.862-9.247 5.945-14.9 0-.689-.031-1.223-.052-1.516L219.855 457.54a800.258 800.258 0 0 0 10.083-7.722c36.949-28.903 79.374-65.968 123.083-107.473l44.473 44.515c.721.689 2.403 2.895 2.895 3.814l86.918 155.602c2.654 5.026 7.764 8.13 13.428 8.13 4.044 0 7.889-1.599 10.836-4.566l26.248-26.229c3.407-3.562 5.319-8.401 5.371-13.688 0-1.776-.25-3.5-.71-5.12l-22.205-74.149 18.066-18.098c3.041-3.021 4.766-7.221 4.766-11.536 0-4.337-1.683-8.412-4.744-11.516l-13.25-13.239c-3.03-3.041-7.221-4.775-11.536-4.775-3.657 0-7.23 1.223-10.021 3.428l-3.104-10.387 19.718-19.718c3.03-3.041 4.755-7.242 4.755-11.568 0-4.357-1.683-8.442-4.755-11.504l-13.188-13.188c-3.041-3.083-7.262-4.828-11.599-4.828-4.357 0-8.579 1.766-11.557 4.807l-.136.125-21.84-72.895c7.545-7.189 14.702-14.034 21.547-20.481 39.535-37.515 68.082-64.6 88.374-91.726z")
              | {{ user.travel ? $t('form.travel') : '' }}
        p.contact-address(v-if="user.end.logradouro || user.end.localidade || user.end.uf" @click="labelFor('GET-address')")
          svg.icon-location(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="13")
            path(d="M256 0C153.755 0 70.573 83.182 70.573 185.426c0 126.888 165.939 313.167 173.004 321.035 6.636 7.391 18.222 7.378 24.846 0 7.065-7.868 173.004-194.147 173.004-321.035C441.425 83.182 358.244 0 256 0zm0 278.719c-51.442 0-93.292-41.851-93.292-93.293S204.559 92.134 256 92.134s93.291 41.851 93.291 93.293-41.85 93.292-93.291 93.292z")
          | {{ user.end.logradouro }}
          | {{ user.end.logradouro && user.end.localidade ? ' &bull; ' : ''}}
          | {{ user.end.localidade }}
          | {{ (user.end.logradouro || user.end.localidade) && user.end.uf ? ' &bull; ' : ''}}
          | {{ user.end.uf }}
        draggable.contact-info(
          :list="user.telephones"
          ghost-class="ghost"
          @start="dragging = true"
          @end="dragging = false"
          @change="updateVuex('updateTelephone', $event)"
        )
          label(:for="'GET-telephone-' + key" v-if="user.telephones" v-for="(telephone, key) in user.telephones")
            p
              svg.icon-phone(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 348.077 348.077" width="13")
                path(d="M340.273 275.083l-53.755-53.761c-10.707-10.664-28.438-10.34-39.518.744l-27.082 27.076a792.327 792.327 0 0 1-5.344-2.973c-17.102-9.476-40.509-22.464-65.14-47.113-24.704-24.701-37.704-48.144-47.209-65.257-1.003-1.813-1.964-3.561-2.913-5.221l18.176-18.149 8.936-8.947c11.097-11.1 11.403-28.826.721-39.521L73.39 8.194c-10.682-10.68-28.421-10.356-39.518.744l-15.15 15.237.414.411c-5.08 6.482-9.325 13.958-12.484 22.02C3.74 54.28 1.927 61.603 1.098 68.941-6 127.785 20.89 181.564 93.866 254.541c100.875 100.868 182.167 93.248 185.674 92.876 7.638-.913 14.958-2.738 22.397-5.627 7.992-3.122 15.463-7.361 21.941-12.43l.331.294 15.348-15.029c11.074-11.098 11.393-28.83.716-39.542z")
              | {{ telephone }}
        draggable.contact-info(
          :list="user.emails"
          ghost-class="ghost"
          @start="dragging = true"
          @end="dragging = false"
          @change="updateVuex('updateEmail', $event)"
        )
          label(:for="'GET-email-' + key" v-if="user.emails" v-for="(email, key) in user.emails")
            p
              svg.icon-email(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="13")
                path(d="M467 61H45C20.218 61 0 81.196 0 106v300c0 24.72 20.128 45 45 45h422c24.72 0 45-20.128 45-45V106c0-24.72-20.128-45-45-45zm-6.214 30L256.954 294.833 51.359 91h409.427zM30 399.788V112.069l144.479 143.24L30 399.788zM51.213 421l144.57-144.57 50.657 50.222c5.864 5.814 15.327 5.795 21.167-.046L317 277.213 460.787 421H51.213zM482 399.787L338.213 256 482 112.212v287.575z")
              | {{ email }}
        draggable.contact-info(
          :list="user.sites"
          ghost-class="ghost"
          @start="dragging = true"
          @end="dragging = false"
          @change="updateVuex('updateSite', $event)"
        )
          label(:for="'GET-site-' + key" v-if="user.sites" v-for="(site, key) in user.sites")
            p
              svg.icon-site(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 438.536 438.536" width="13")
                path(d="M414.41 24.123C398.333 8.042 378.963 0 356.315 0H82.228C59.58 0 40.21 8.042 24.126 24.123 8.045 40.207.003 59.576.003 82.225v274.084c0 22.647 8.042 42.018 24.123 58.102 16.084 16.084 35.454 24.126 58.102 24.126h274.084c22.648 0 42.018-8.042 58.095-24.126 16.084-16.084 24.126-35.454 24.126-58.102V82.225c-.001-22.649-8.043-42.021-24.123-58.102zm-48.961 204.279c0 7.994-3.717 13.606-11.136 16.844-2.471.951-4.859 1.427-7.139 1.427-5.134 0-9.418-1.811-12.847-5.424l-41.11-41.112-152.453 152.462c-3.621 3.614-7.9 5.425-12.85 5.425-4.952 0-9.235-1.811-12.851-5.425l-29.121-29.126c-3.617-3.61-5.426-7.901-5.426-12.847 0-4.944 1.809-9.229 5.426-12.843l152.462-152.464-41.113-41.112c-5.902-5.52-7.233-12.178-3.999-19.985 3.234-7.421 8.852-11.136 16.846-11.136h137.037c4.948 0 9.232 1.81 12.854 5.428 3.613 3.614 5.421 7.898 5.421 12.847v137.041z")
              | {{ site }}
      label.about-me(for="GET-about" v-if="user.about")
        h2 {{ $t('form.about_me') }}
        p
          pre {{ user.about }}
      .languages(v-if="user.languages.length !== 0")
        h2 {{ user.languages.length <= 1 ? $tc('form.language', 1) : $tc('form.language', 2) }}
        draggable(
          tag="ul"
          :list="user.languages"
          ghost-class="ghost"
          @start="dragging = true"
          @end="dragging = false"
          @change="updateVuex('updateSite', $event)"
        )
          li(v-if="user.languages" v-for="(language, key) in user.languages")
            label(:for="'GET-language-' + key" v-if="language")
              | {{ language }}
      label.hobby(v-if="user.hobbies[0] && user.name")
        h2 {{ user.hobbies.length <= 1 ? $tc('form.hobby', 1) : $tc('form.hobby', 2) }}
        draggable(
          tag="ul"
          :list="user.hobbies"
          ghost-class="ghost"
          @start="dragging = true"
          @end="dragging = false"
        )
          li(v-for="hobby in user.hobbies") {{ hobby }}
      .cademy(v-if="user.coursers[0]")
        h2 {{ $t('form.cademy')}}
        draggable(
          :list="user.coursers"
          ghost-class="ghost"
          .handle=".handle"
          @start="dragging = true"
          @end="dragging = false"
          @change="updateVuex('updateCourser', $event)"
        )
          .coursers(v-for="(course, key) in user.coursers")
            label(:for="'GET-school-' + key" v-if="course.formation.school")
              h3
                svg.icon-course(viewBox="0 -35 512 512" width="20" xmlns="http://www.w3.org/2000/svg")
                  path(d="M512 135.5c0-13.242-8.941-25.305-24.531-33.102L302.074 9.703C289.56 3.445 273.195 0 255.996 0c-17.203 0-33.57 3.445-46.086 9.703L24.531 102.398C8.941 110.195 0 122.262 0 135.504s8.941 25.305 24.531 33.098l40.383 20.191V293.98c0 29.883 20.934 63.758 47.66 77.125l97.348 48.668c12.922 6.461 29.5 9.692 46.082 9.692s33.164-3.23 46.086-9.692l97.332-48.668c26.726-13.367 47.664-47.242 47.664-77.125V188.797l34.91-17.457v254.707c0 8.285 6.715 15 15 15s15-6.715 15-15V135.57c0-.023.004-.047.004-.07zm-481.965 0c.34-.805 2.25-3.441 7.914-6.273l185.38-92.688C231.636 32.383 243.542 30 255.995 30c12.45 0 24.356 2.383 32.664 6.535L456.59 120.5H312.328c-7.515-20.387-29.922-35.215-56.332-35.215-32.539 0-59.02 22.528-59.02 50.215 0 27.691 26.477 50.219 59.02 50.219 26.41 0 48.82-14.832 56.332-35.219h144.27l-167.926 83.96c-8.313 4.157-20.215 6.54-32.664 6.54h-.004c-12.45 0-24.356-2.383-32.664-6.535L37.95 141.77c-5.665-2.833-7.575-5.465-7.915-6.27zm254.985 0c0 10.96-13.29 20.219-29.024 20.219-15.726 0-29.02-9.258-29.02-20.219 0-10.957 13.294-20.215 29.02-20.215 15.734 0 29.024 9.258 29.024 20.215zm132.066 158.48c0 18.512-14.524 42.012-31.082 50.293l-97.332 48.668c-17.402 8.7-47.934 8.7-65.332 0l-97.348-48.668c-16.555-8.28-31.082-31.78-31.082-50.293v-90.187l115.012 57.504C222.437 267.555 238.8 271 256.004 271s33.566-3.45 46.082-9.707l115-57.5zm0 0")
                |{{ course.formation.school }}
              button.handle.btn.bullet.small.left.move(type="button" :aria-label="$t('aria-label.move') + ' ' + course.formation.name")
                i =
            label(:for="'GET-course-' + key" v-if="course.formation.name")
              p {{ course.formation.name }}
            label(:for="'GET-courseabout-' + key" v-if="course.formation.about")
              p
                pre
                  b {{ $t('form.activities') }}:
                  |  {{ course.formation.about }}
            label(:for="'GET-schoolLink-' + key" v-if="course.formation.link")
              p
                pre
                  b {{ $t('form.link') }}:
                  |  {{ course.formation.link }}
            p.date(v-if="course.formation.data_start")
              svg.icon-date(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.634 511.634" width="13")
                path(d="M482.513 83.942c-7.225-7.233-15.797-10.85-25.694-10.85h-36.541v-27.41c0-12.56-4.477-23.315-13.422-32.261C397.906 4.475 387.157 0 374.591 0h-18.268c-12.565 0-23.318 4.475-32.264 13.422-8.949 8.945-13.422 19.701-13.422 32.261v27.41h-109.63v-27.41c0-12.56-4.475-23.315-13.422-32.261C178.64 4.475 167.886 0 155.321 0H137.05c-12.562 0-23.317 4.475-32.264 13.422-8.945 8.945-13.421 19.701-13.421 32.261v27.41H54.823c-9.9 0-18.464 3.617-25.697 10.85-7.233 7.232-10.85 15.8-10.85 25.697v365.453c0 9.89 3.617 18.456 10.85 25.693 7.232 7.231 15.796 10.849 25.697 10.849h401.989c9.897 0 18.47-3.617 25.694-10.849 7.234-7.234 10.852-15.804 10.852-25.693V109.639c-.001-9.9-3.615-18.464-10.845-25.697zM137.047 475.088H54.823v-82.23h82.224v82.23zm0-100.498H54.823v-91.358h82.224v91.358zm0-109.639H54.823v-82.223h82.224v82.223zm-6.42-130.618c-1.809-1.809-2.712-3.946-2.712-6.423V45.686c0-2.474.903-4.617 2.712-6.423 1.809-1.809 3.946-2.712 6.423-2.712h18.271c2.474 0 4.617.903 6.423 2.712 1.809 1.807 2.714 3.949 2.714 6.423v82.224c0 2.478-.909 4.615-2.714 6.423-1.807 1.809-3.946 2.712-6.423 2.712H137.05c-2.474.001-4.614-.903-6.423-2.712zm116.056 340.755h-91.365v-82.23h91.365v82.23zm0-100.498h-91.365v-91.358h91.365v91.358zm0-109.639h-91.365v-82.223h91.365v82.223zm109.64 210.137h-91.364v-82.23h91.364v82.23zm0-100.498h-91.364v-91.358h91.364v91.358zm0-109.639h-91.364v-82.223h91.364v82.223zm-6.427-130.618c-1.807-1.809-2.707-3.946-2.707-6.423V45.686c0-2.474.9-4.617 2.707-6.423 1.808-1.809 3.949-2.712 6.427-2.712h18.268c2.478 0 4.617.903 6.427 2.712 1.808 1.807 2.707 3.949 2.707 6.423v82.224c0 2.478-.903 4.615-2.707 6.423-1.807 1.809-3.949 2.712-6.427 2.712h-18.268c-2.477.001-4.626-.903-6.427-2.712zm106.916 340.755h-82.228v-82.23h82.228v82.23zm0-100.498h-82.228v-91.358h82.228v91.358zm0-109.639h-82.228v-82.223h82.228v82.223z")
              span(@click="labelFor('GET-coursedata__start-' + key)") {{ translateDate(course.formation.data_start) }}&nbsp;
              span(@click="labelFor('GET-coursedata__finish-' + key)") {{ translateDate(course.formation.data_end) ? $t('form.to') : '' }} {{ translateDate(course.formation.data_end) }}&nbsp;
              span(v-if="course.formation.now" @click="labelFor('GET-coursenow-' + key)")
                svg.icon-check(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.667 426.667" width="15")
                  path(d="M213.333 0C95.518 0 0 95.514 0 213.333s95.518 213.333 213.333 213.333c117.828 0 213.333-95.514 213.333-213.333S331.157 0 213.333 0zm-39.134 322.918l-93.935-93.931 31.309-31.309 62.626 62.622 140.894-140.898 31.309 31.309-172.203 172.207z")
                | {{ course.formation.now ? $t('form.cademy_now') : '' }}
            hr(v-if="key !== (user.coursers.length - 1)")
      .exps(v-if="user.exps[0]")
        h2 {{ $t('form.exp')}}
        draggable(
          :list="user.exps"
          ghost-class="ghost"
          handle=".handle"
          @start="dragging = true"
          @end="dragging = false"
          @change="updateVuex('updateExp', $event)"
        )
          .experiencies(v-for="(exp, key) in user.exps")
            label(:for="'GET-company-' + key" v-if="exp.experience.name")
              h3
                svg.icon-experience(viewBox="0 -31 512 512" xmlns="http://www.w3.org/2000/svg" width="20")
                  path(d="M497.094 60.004c-.031 0-.063-.004-.094-.004H361V45c0-24.813-20.188-45-45-45H196c-24.813 0-45 20.188-45 45v15H15C6.648 60 0 66.844 0 75v330c0 24.813 20.188 45 45 45h422c24.813 0 45-20.188 45-45V75.316v-.058c-.574-9.852-6.633-15.2-14.906-15.254zM181 45c0-8.27 6.73-15 15-15h120c8.27 0 15 6.73 15 15v15H181zm295.188 45l-46.583 139.742A14.975 14.975 0 0 1 415.38 240H331v-15c0-8.285-6.715-15-15-15H196c-8.285 0-15 6.715-15 15v15H96.621a14.975 14.975 0 0 1-14.226-10.258L35.813 90zM301 240v30h-90v-30zm181 165c0 8.27-6.73 15-15 15H45c-8.27 0-15-6.73-15-15V167.434l23.934 71.796A44.935 44.935 0 0 0 96.62 270H181v15c0 8.285 6.715 15 15 15h120c8.285 0 15-6.715 15-15v-15h84.379a44.935 44.935 0 0 0 42.687-30.77L482 167.434zm0 0")
                | {{ exp.experience.name }}
                button.handle.btn.bullet.small.left.move(type="button" :aria-label="$t('aria-label.move') + ' ' + exp.experience.name")
                  i =
            label(:for="'GET-exps-' + key" v-if="exp.experience.work")
              p
                b {{ $t('form.office') }}:
                |  {{ exp.experience.work }}
            label(:for="'GET-expsabout-' + key" v-if="exp.experience.about")
              p
                pre
                  b {{ $t('form.activities') }}:
                  |  {{ exp.experience.about }}
            label(:for="'GET-companyLink-' + key" v-if="exp.experience.link")
              p
                b {{ $t('form.link') }}:
                |  {{ exp.experience.link }}
            p.date(v-if="exp.experience.data_start && exp.experience.now")
              svg.icon-date(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.634 511.634" width="13")
                path(d="M482.513 83.942c-7.225-7.233-15.797-10.85-25.694-10.85h-36.541v-27.41c0-12.56-4.477-23.315-13.422-32.261C397.906 4.475 387.157 0 374.591 0h-18.268c-12.565 0-23.318 4.475-32.264 13.422-8.949 8.945-13.422 19.701-13.422 32.261v27.41h-109.63v-27.41c0-12.56-4.475-23.315-13.422-32.261C178.64 4.475 167.886 0 155.321 0H137.05c-12.562 0-23.317 4.475-32.264 13.422-8.945 8.945-13.421 19.701-13.421 32.261v27.41H54.823c-9.9 0-18.464 3.617-25.697 10.85-7.233 7.232-10.85 15.8-10.85 25.697v365.453c0 9.89 3.617 18.456 10.85 25.693 7.232 7.231 15.796 10.849 25.697 10.849h401.989c9.897 0 18.47-3.617 25.694-10.849 7.234-7.234 10.852-15.804 10.852-25.693V109.639c-.001-9.9-3.615-18.464-10.845-25.697zM137.047 475.088H54.823v-82.23h82.224v82.23zm0-100.498H54.823v-91.358h82.224v91.358zm0-109.639H54.823v-82.223h82.224v82.223zm-6.42-130.618c-1.809-1.809-2.712-3.946-2.712-6.423V45.686c0-2.474.903-4.617 2.712-6.423 1.809-1.809 3.946-2.712 6.423-2.712h18.271c2.474 0 4.617.903 6.423 2.712 1.809 1.807 2.714 3.949 2.714 6.423v82.224c0 2.478-.909 4.615-2.714 6.423-1.807 1.809-3.946 2.712-6.423 2.712H137.05c-2.474.001-4.614-.903-6.423-2.712zm116.056 340.755h-91.365v-82.23h91.365v82.23zm0-100.498h-91.365v-91.358h91.365v91.358zm0-109.639h-91.365v-82.223h91.365v82.223zm109.64 210.137h-91.364v-82.23h91.364v82.23zm0-100.498h-91.364v-91.358h91.364v91.358zm0-109.639h-91.364v-82.223h91.364v82.223zm-6.427-130.618c-1.807-1.809-2.707-3.946-2.707-6.423V45.686c0-2.474.9-4.617 2.707-6.423 1.808-1.809 3.949-2.712 6.427-2.712h18.268c2.478 0 4.617.903 6.427 2.712 1.808 1.807 2.707 3.949 2.707 6.423v82.224c0 2.478-.903 4.615-2.707 6.423-1.807 1.809-3.949 2.712-6.427 2.712h-18.268c-2.477.001-4.626-.903-6.427-2.712zm106.916 340.755h-82.228v-82.23h82.228v82.23zm0-100.498h-82.228v-91.358h82.228v91.358zm0-109.639h-82.228v-82.223h82.228v82.223z")
              span(@click="labelFor('GET-expsdata__start-' + key)") {{ translateDate(exp.experience.data_start) }}&nbsp;
              span(v-if="exp.experience.now" @click="labelFor('GET-expsnow-' + key)")
                svg.icon-check(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.667 426.667" width="15")
                  path(d="M213.333 0C95.518 0 0 95.514 0 213.333s95.518 213.333 213.333 213.333c117.828 0 213.333-95.514 213.333-213.333S331.157 0 213.333 0zm-39.134 322.918l-93.935-93.931 31.309-31.309 62.626 62.622 140.894-140.898 31.309 31.309-172.203 172.207z")
                | {{ exp.experience.now ? $t('form.exp_now') : '' }}
            p.date(v-if="exp.experience.data_start && !exp.experience.now")
              svg.icon-date(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.634 511.634" width="13")
                path(d="M482.513 83.942c-7.225-7.233-15.797-10.85-25.694-10.85h-36.541v-27.41c0-12.56-4.477-23.315-13.422-32.261C397.906 4.475 387.157 0 374.591 0h-18.268c-12.565 0-23.318 4.475-32.264 13.422-8.949 8.945-13.422 19.701-13.422 32.261v27.41h-109.63v-27.41c0-12.56-4.475-23.315-13.422-32.261C178.64 4.475 167.886 0 155.321 0H137.05c-12.562 0-23.317 4.475-32.264 13.422-8.945 8.945-13.421 19.701-13.421 32.261v27.41H54.823c-9.9 0-18.464 3.617-25.697 10.85-7.233 7.232-10.85 15.8-10.85 25.697v365.453c0 9.89 3.617 18.456 10.85 25.693 7.232 7.231 15.796 10.849 25.697 10.849h401.989c9.897 0 18.47-3.617 25.694-10.849 7.234-7.234 10.852-15.804 10.852-25.693V109.639c-.001-9.9-3.615-18.464-10.845-25.697zM137.047 475.088H54.823v-82.23h82.224v82.23zm0-100.498H54.823v-91.358h82.224v91.358zm0-109.639H54.823v-82.223h82.224v82.223zm-6.42-130.618c-1.809-1.809-2.712-3.946-2.712-6.423V45.686c0-2.474.903-4.617 2.712-6.423 1.809-1.809 3.946-2.712 6.423-2.712h18.271c2.474 0 4.617.903 6.423 2.712 1.809 1.807 2.714 3.949 2.714 6.423v82.224c0 2.478-.909 4.615-2.714 6.423-1.807 1.809-3.946 2.712-6.423 2.712H137.05c-2.474.001-4.614-.903-6.423-2.712zm116.056 340.755h-91.365v-82.23h91.365v82.23zm0-100.498h-91.365v-91.358h91.365v91.358zm0-109.639h-91.365v-82.223h91.365v82.223zm109.64 210.137h-91.364v-82.23h91.364v82.23zm0-100.498h-91.364v-91.358h91.364v91.358zm0-109.639h-91.364v-82.223h91.364v82.223zm-6.427-130.618c-1.807-1.809-2.707-3.946-2.707-6.423V45.686c0-2.474.9-4.617 2.707-6.423 1.808-1.809 3.949-2.712 6.427-2.712h18.268c2.478 0 4.617.903 6.427 2.712 1.808 1.807 2.707 3.949 2.707 6.423v82.224c0 2.478-.903 4.615-2.707 6.423-1.807 1.809-3.949 2.712-6.427 2.712h-18.268c-2.477.001-4.626-.903-6.427-2.712zm106.916 340.755h-82.228v-82.23h82.228v82.23zm0-100.498h-82.228v-91.358h82.228v91.358zm0-109.639h-82.228v-82.223h82.228v82.223z")
              span(@click="labelFor('GET-expsdata__start-' + key)") {{ translateDate(exp.experience.data_start) }}&nbsp;
              span(@click="labelFor('GET-expsdata__finish-' + key)") {{ exp.experience.data_end ? $t('form.to') : '' }} {{ translateDate(exp.experience.data_end) }}
            hr
</template>

<script>
import { mapState } from 'vuex'
import { mixinUpdateStore } from '@/mixins/mixinUpdateStore.js'

export default {
  name: 'app-render',
  computed: mapState({
    user: state => state.user,
    icon_render: state => state.icon_render,
    layout_render: state => state.layout_render
  }),
  mixins: [mixinUpdateStore],
  created () { window.addEventListener('scroll', this.viewFixed) },
  destroyed () { window.removeEventListener('scroll', this.viewFixed) },
  data () {
    return {
      viewfixed: false,
      dragging: false
    }
  },
  methods: {
    labelFor (name) {
      let inputItem = document.querySelector(`#${name}`)
      inputItem.focus()
    },
    rotateFigure () {
      let photo = document.querySelector('#photo'),
          transform = photo.style.transform

      switch (transform) {
        case 'rotate(90deg)':
          photo.style.transform = "rotate(180deg)"
          break;
        case 'rotate(180deg)':
          photo.style.transform = "rotate(270deg)"
          break;
        case 'rotate(270deg)':
          photo.style.transform = ""
          break;
        default:
          photo.style.transform = "rotate(90deg)"
          break;
      }
    },
    viewFixed () {
      if (window.innerWidth >= 800) {
        let target = document.querySelector('#curriculo').getBoundingClientRect()
        this.viewfixed = target.y <= 0
      } else {
        this.viewfixed = false
      }
    },
    translateDate (date) {
      if (!date) return ''

      let value = new Date(date),
          month = value.getMonth(),
          year = value.getFullYear()

      switch (++month) {
        case 1:
          month = this.$t('calendar.january')
          break
        case 2:
          month = this.$t('calendar.february')
          break
        case 3:
          month = this.$t('calendar.march')
          break
        case 4:
          month = this.$t('calendar.april')
          break
        case 5:
          month = this.$t('calendar.may')
          break
        case 6:
          month = this.$t('calendar.june')
          break
        case 7:
          month = this.$t('calendar.july')
          break
        case 8:
          month = this.$t('calendar.august')
          break
        case 9:
          month = this.$t('calendar.september')
          break
        case 10:
          month = this.$t('calendar.october')
          break
        case 11:
          month = this.$t('calendar.november')
          break
        case 12:
          month = this.$t('calendar.december')
          break
      }

      return `${month} ${this.$t('calendar.in')} ${year}`
    }
  }
}
</script>
